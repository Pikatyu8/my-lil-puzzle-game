[
    {
        "type": "condition",
        "name": "Переполнение буфера (Fixed)",
        "hint": "Заполни левый отсек и углы правого.",
        "grid": [11, 7],
        "start": [2, 3],
        "walls": [
            [
                [[5, 0], [5, 1], [5, 2], [5, 4], [5, 5], [5, 6]], 
                {"lr": "both"} 
            ],
            [
                [[1, 1], [1, 5], [3, 1], [3, 5]], 
                {"square": "inner"}
            ],
            [
                [[7, 2], [9, 4]], 
                {"square": "inner"}
            ]
        ],
        "conditions": [
            { 
                "check": "no_revisit" 
            },
            { 
                "check": "visit", 
                "cells": [[0,0], [4,0], [0,6], [4,6], [10,0], [10,6]] 
            },
            { 
                "check": "end_at", 
                "cells": [10, 3] 
            },
            { 
                "check": "at_steps", 
                "cells": [[5, 3]], 
                "step": 29
            }
        ]
    },
    {
        "name": "1. Змейка (Без повторов)",
        "type": "condition",
        "grid": [5, 5],
        "start": [0, 0],
        "conditions": [
            { "check": "no_revisit", "except": [[0, 0]] },
            { "check": "visit", "cells": [[4, 4]], "count": 1 },
            { "check": "end_at", "cells": [0, 0] }
        ],
        "hint": "Классика: заберите цель в углу и вернитесь."
    },
    {
        "name": "2. Танцпол",
        "type": "condition",
        "grid": [4, 4],
        "start": [0, 0],
        "conditions": [
            { "check": "visit", "cells": [[1, 1], [2, 2]], "count": 4 },
            { "check": "end_at", "cells": [3, 3] }
        ],
        "hint": "Посетите [1,1] и [2,2] минимум по 4 раза каждую."
    },
    {
        "name": "3. Терпение",
        "type": "condition",
        "grid": [5, 3],
        "start": [0, 1],
        "walls": [
            [[[2, 1]], {"u": "inner", "d": "inner"}]
        ],
        "conditions": [
            { "check": "consecutive", "cells": [[2, 1]], "count": 5 },
            { "check": "end_at", "cells": [4, 1] }
        ],
        "hint": "Встаньте в [2,1]. Бейтесь о ВЕРХНЮЮ или НИЖНЮЮ стену 4 раза (чтобы получить 5 посещений подряд)."
    },
    {
        "name": "4. Светофор",
        "type": "condition",
        "grid": [7, 3],
        "start": [0, 1],
        "walls": [
            [[[0, 1]], {"l": "outer"}] 
        ],
        "conditions": [
            { "check": "at_steps", "cells": [[2, 1], [4, 1]], "step_expr": "div:5", "mode": "require" },
            { "check": "end_at", "cells": [6, 1] }
        ],
        "hint": "Используйте стену слева на старте, чтобы пропускать ходы."
    },
    {
        "name": "5. Точный маршрут (20 шагов)",
        "type": "condition",
        "grid": [5, 5],
        "start": [2, 2],
        "conditions": [
            { "check": "total_steps", "count": 20, "operator": "==" },
            { "check": "visit", "cells": "corners", "count": 1 },
            { "check": "end_at", "cells": [2, 2] }
        ],
        "hint": "Центр -> Угол -> Угол -> Угол -> Угол -> Центр. Идеальный круг занимает ровно 20 шагов."
    },
    {
        "name": "6. Заминированное поле",
        "type": "condition",
        "grid": [6, 6],
        "start": [0, 0],
        "conditions": [
            { "check": "at_steps", "cells": [[1,1], [2,2], [3,3], [4,4]], "step_expr": "prime", "mode": "require" },
            { "check": "end_at", "cells": [5, 5] }
        ],
        "hint": "Ходить по диагонали можно только на шагах: 2, 3, 5, 7, 11, 13..."
    },
    {
        "name": "7. Выбор (XOR)",
        "type": "condition",
        "grid": [5, 5],
        "start": [2, 0],
        "conditions": [
            {
                "check": "group",
                "logic": "XOR",
                "items": [
                    { "check": "visit", "cells": [[0, 4]], "count": 1 },
                    { "check": "visit", "cells": [[4, 4]], "count": 1 }
                ]
            },
            { "check": "end_at", "cells": [2, 2] }
        ],
        "hint": "Или левый нижний, или правый нижний. Не оба."
    },
    {
        "name": "8. Ордер",
        "type": "condition",
        "grid": [5, 5],
        "start": [0, 0],
        "conditions": [
            { "check": "order", "cells": [[4, 0], [2, 2], [0, 4], [4, 4]] },
            { "check": "end_at", "cells": [2, 2] }
        ],
        "hint": "Порядок: Пр.Верх -> Центр -> Лев.Низ -> Пр.Низ -> Финиш."
    },
    {
        "name": "9. Односторонний клапан (Проход)",
        "type": "condition",
        "grid": [6, 4],
        "start": [0, 0],
        "walls": [
            [[[2, 0], [2, 1], [2, 2]], {"r": "outer"}]
        ],
        "conditions": [
            { "check": "visit", "cells": [[5, 0], [5, 3]], "count": 1 },
            { "check": "end_at", "cells": [0, 3] }
        ],
        "hint": "Стена блокирует возврат на строках 0, 1, 2. Но строка 3 свободна! Идите туда поверху, возвращайтесь низом."
    },
    {
        "name": "10. Гранд Финал",
        "type": "condition",
        "grid": [7, 7],
        "start": [3, 3],
        "walls": [
             [[[3, 3]], {"u": "outer", "l": "outer", "r": "outer"}]
        ],
        "conditions": [
            { "check": "visit", "cells": "corners", "count": 1 },
            { "check": "no_revisit", "except": [[3, 3]] },
            { "check": "end_at", "cells": [3, 3] }
        ],
        "hint": "Старт в коробке. Выйти можно куда угодно (изнутри outer не держит). А вот вернуться можно только СНИЗУ (там нет стены)."
    }

]
